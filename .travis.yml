language: generic

os: osx

before_install:
- openssl aes-256-cbc -K $encrypted_af8ee76d875e_key -iv $encrypted_af8ee76d875e_iv
  -in travis_rsa.enc -out travis_rsa -d
- chmod 600 travis_rsa

install:
- brew install qemu zoidbergwill/python/python35
- brew install pygobject3 --with-python3 gtk+3
- python3 -m pip install -r requirements-macos.txt
- python3 -m pip install pyinstaller
- pyinstaller pibox-installer-macos.spec
- scp -o StrictHostKeyChecking=no -i travis_rsa dist/pibox-installer root@thiolliere.org:/var/www/html/public/pibox-binaries/pibox-installer-macos
